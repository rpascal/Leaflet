
<script>

    var OpcosModel = (function () {
        var opcoLayer;

        var init = function () {
            $.ajax(
                {
                    url: "/Data/OperatingCompanyJson/operatingCompanies.json",
                    type: "GET",
                    dataType: "json"
                }).done(function (companyPolygons) {
                    opcoLayer = createGeoJsonLayer(
                        {
                            data: companyPolygons,
                            newStyles: function (feature) { return { color: feature.properties.fill } },
                            onEachFeature: function (feature, layer) {
                                layer.bindPopup(feature.properties.NAME);
                            }
                        }
                    );
                    show();
                }).fail(function (err) {
                    console.log('OpCoErr: ', err);
                })
        }


        var show = function () {
            if (opcoLayer)
                opcoLayer.addTo(getMap());
        }

        var hide = function () {
            if (opcoLayer)
                opcoLayer.remove();
        }
        return {
            init: init,
            show: show,
            hide:hide
        };
    })();

</script>